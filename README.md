# arkadius-bot

–ö–∞—Ä–ª ‚Äî Telegram –±–æ—Ç, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ TypeScript. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ChatGPT¬†4o –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö –ø—Ä–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏–∏ –∏–ª–∏ –æ—Ç–≤–µ—Ç–µ –Ω–∞ –µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ö–æ–º–∞–Ω–¥–∞ `/menu` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é –±–æ—Ç–∞. –í—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏.
- –î–æ—Å—Ç—É–ø –≤—ã–¥–∞—ë—Ç—Å—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è; —Ç–æ–ª—å–∫–æ –æ–Ω –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –ø–∞–º—è—Ç—å —á–µ—Ä–µ–∑ –º–µ–Ω—é –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞.
- –û—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –µ–≥–æ —É–ø–æ–º—è–Ω—É—Ç, –æ—Ç–≤–µ—Ç—è—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞ –∏–ª–∏ –Ω–∞—á–Ω—É—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–º–µ–Ω–∏ –ö–∞—Ä–ª.
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∏–ª–∏ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø—Ä–∏–∑–Ω–∞–∫–æ–º –∏–Ω—Ç–µ—Ä–µ—Å–∞ (`{interested:true}`).
- –ó–∞–ø–æ–º–∏–Ω–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ SQLite –∏ —Å—É–º–º–∏—Ä—É–µ—Ç –¥–ª–∏–Ω–Ω—ã–µ —á–∞—Ç—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –±–æ—Ç–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ, —É—á–∏—Ç—ã–≤–∞—è –ø—Ä–∏ –æ—Ç–≤–µ—Ç–∞—Ö.
- –ü–µ—Ä—Å–æ–Ω–∞ –±–æ—Ç–∞ –æ–ø–∏—Å–∞–Ω–∞ –≤ `prompts/persona.md`.

## –û–¥–æ–±—Ä–µ–Ω–∏–µ –∏ –±–∞–Ω —á–∞—Ç–æ–≤

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏–∑ –Ω–µ–∑–Ω–∞–∫–æ–º–æ–≥–æ —á–∞—Ç–∞ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –∑–∞–ø—Ä–æ—Å —Å –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–†–∞–∑—Ä–µ—à–∏—Ç—å¬ª –∏ ¬´–ó–∞–±–∞–Ω–∏—Ç—å¬ª. –ü–æ–∫–∞ —á–∞—Ç –Ω–µ –æ–¥–æ–±—Ä–µ–Ω, —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –Ω–µ–≥–æ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è. –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –≤—ã–¥–∞—á–µ –¥–æ—Å—Ç—É–ø–∞ –∏–ª–∏ –±–∞–Ω—É –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∞—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `chat_configs` –∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –º–µ–Ω—é.

### –û–±—ã—á–Ω—ã–π —á–∞—Ç

1. –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `/menu` –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´‚öôÔ∏è¬†–ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª.
2. –í—ã–±–µ—Ä–∏—Ç–µ:
   - ¬´üïí¬†–õ–∏–º–∏—Ç –∏—Å—Ç–æ—Ä–∏–∏¬ª ‚Äî —Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç —Ö—Ä–∞–Ω–∏—Ç –≤ –ø–∞–º—è—Ç–∏.
   - ¬´‚ú®¬†–ò–Ω—Ç–µ—Ä–≤–∞–ª –∏–Ω—Ç–µ—Ä–µ—Å–∞¬ª ‚Äî –∫–∞–∫ —á–∞—Å—Ç–æ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è.
3. –í –æ—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –æ—Ç¬†1¬†–¥–æ¬†50. –ù–∞–ø—Ä–∏–º–µ—Ä:
   - `20` ‚Äî —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ 20 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
   - `5` ‚Äî –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∏–Ω—Ç–µ—Ä–µ—Å–æ–º –Ω–µ —á–∞—â–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –≤ –ø—è—Ç—å.

### –ê–¥–º–∏–Ω‚Äë–º–µ–Ω—é

1. –í –∞–¥–º–∏–Ω‚Äë—á–∞—Ç–µ –≤—ã–∑–æ–≤–∏—Ç–µ `/menu` –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´üí¨¬†–ß–∞—Ç—ã¬ª.
2. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —á–∞—Ç ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
3. –î–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–∞—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–Ω–æ–ø–∫–∏ ¬´üïí¬†–õ–∏–º–∏—Ç –∏—Å—Ç–æ—Ä–∏–∏¬ª –∏ ¬´‚ú®¬†–ò–Ω—Ç–µ—Ä–≤–∞–ª –∏–Ω—Ç–µ—Ä–µ—Å–∞¬ª, –∑–Ω–∞—á–µ–Ω–∏—è –≤–≤–æ–¥—è—Ç—Å—è —Ç–∞–∫ –∂–µ, –∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–º —á–∞—Ç–µ (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –æ—Ç¬†1¬†–¥–æ¬†50).

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   npm install
   ```
2. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Å —Ç–æ–∫–µ–Ω–∞–º–∏ Telegram –∏ OpenAI –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   ```
   BOT_TOKEN=your-telegram-token
   OPENAI_KEY=your-openai-key
   ADMIN_CHAT_ID=123456         # ID —á–∞—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –≤—ã–¥–∞—á–∏ –∫–ª—é—á–µ–π
   LOG_PROMPTS=false            # –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –≤ prompts.log
   ```

–ï—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∏–ª–∏ –∏–∑–º–µ–Ω—è–µ—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª `.env.example`.

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
npm run dev
```

4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î:
   ```bash
   npm run migration:up
   ```
   –ï—Å–ª–∏ —Ñ–∞–π–ª `memory.db` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∞–±–ª–∏—Ü—É `migrations`,
   —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏—Ç –µ–≥–æ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –º–∏–≥—Ä–∞—Ü–∏–π.
5. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
   ```bash
   npm run build
   ```
6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–æ–±—Ä–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é:
   ```bash
   npm start
   ```

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –∏ —Ç–µ—Å—Ç–æ–≤ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

```bash
npm exec tsc
npm test
npm run test:coverage
```

–î–ª—è –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏—è –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ:

```bash
npm run lint:fix
```

–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è husky-–ø—Ä–æ–≤–µ—Ä–∫–∏. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ `--no-verify`, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∏—Ö.

–í –ø—Ä–æ–µ–∫—Ç–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–ø `any` –∏ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã `@ts-`. –í—Å–µ —Ç–∞–∫–∏–µ
—É—á–∞—Å—Ç–∫–∏ –∫–æ–¥–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω—ã –∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —è–≤–Ω—ã–µ —Ç–∏–ø—ã.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `src/index.ts` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- `src/view/telegram/TelegramBot.ts` ‚Äî –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.
- `src/infrastructure/external/ChatGPTService.ts` ‚Äî –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ c OpenAI.
- `src/application/use-cases/chat/ChatMemory.ts` ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏ –µ—ë —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è.
- `dist/` ‚Äî —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.
- –°–µ—Ä–≤–∏—Å—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ Symbol-–∫–ª—é—á–∏ Inversify; —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
  –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –≤ `src/container.ts`.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ —Ç—Ä–∏ —Å–ª–æ—è:

1. **TemplateService** ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç —à–∞–±–ª–æ–Ω—ã –∏–∑ —Ñ–∞–π–ª–æ–≤ –∫–∞—Ç–∞–ª–æ–≥–∞ `prompts/`.
2. **PromptBuilder** ‚Äî –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —á–∞—Å—Ç–∏ —à–∞–±–ª–æ–Ω–æ–≤ —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É –º–µ—Ç–æ–¥–æ–≤.
3. **PromptDirector** ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –±–∏–ª–¥–µ—Ä–∞–º–∏ –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ
   —Å—Ü–µ–Ω–∞—Ä–∏—è.

–ü—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞ –æ—Ç–≤–µ—Ç–∞:

```ts
const director = container.get(PROMPT_DIRECTOR_ID);
const messages = await director.createAnswerPrompt(history, summary, trigger);
```

–ú–∏–≥—Ä–∞—Ü–∏—è —Å `FilePromptService`:

1. –ó–∞–º–µ–Ω–∏—Ç–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `FilePromptService` –Ω–∞ `PromptDirector`.
2. –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–≥–æ—Ç–æ–≤–∫–∏ –ø–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ `prompts/` –∏ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ –∏—Ö —á–µ—Ä–µ–∑
   `FilePromptTemplateService`.
3. –î–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ —à–∞–≥–∏ –≤ —Ü–µ–ø–æ—á–∫—É `PromptBuilder` –≤–º–µ—Å—Ç–æ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫.

–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –±—É–¥—É—â–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

- —Å–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–∏–ª–¥–µ—Ä, —Ä–∞—Å—à–∏—Ä–∏–≤ `PromptBuilder` –Ω–æ–≤—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏;
  –ø—Ä–∏–º–µ—Ä:

```ts
class WeatherBuilder extends PromptBuilder {
  addWeather(info: string): this {
    this.steps.push(async () => [{ role: 'system', content: info }]);
    return this;
  }
}
```

- –¥–æ–±–∞–≤—å—Ç–µ —à–∞–±–ª–æ–Ω—ã –≤ `prompts/` –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –≤ –Ω–æ–≤–æ–º –±–∏–ª–¥–µ—Ä–µ –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–µ.

### –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∏ windowConfig

–í `windowConfig` –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –æ–∫–Ω–∞ –º–µ–Ω—é –∏ –∏—Ö –∫–Ω–æ–ø–∫–∏ —Å –ø–æ–º–æ—â—å—é `createRoute` –∏
`createButton`. –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–±—ä–µ–∫—Ç—ã, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø–∞–º
`RouteApi` –∏ `ButtonApi`, –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –æ–∫–æ–Ω –∏
–¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.

`registerRoutes` —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `callback_data`, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–∫–Ω–∞ –∏
—É–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–µ–∫–æ–º –ø–µ—Ä–µ—Ö–æ–¥–æ–≤. –ü—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç—Å—è, –∞ –ø—Ä–∏
–Ω–∞–ª–∏—á–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ¬´‚¨ÖÔ∏è¬†–ù–∞–∑–∞–¥¬ª. –î–ª—è –ø–æ–∫–∞–∑–∞ –æ–∫–Ω–∞
–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `router.show(ctx, id)`. –§—É–Ω–∫—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä—è–º–æ –≤
–∫–Ω–æ–ø–∫–∞—Ö.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

–í SQLite –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

- `users` ‚Äî —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –±–æ—Ç–∞, –≤–∫–ª—é—á–∞—è –ø–æ–ª–µ `attitude` –¥–ª—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è –±–æ—Ç–∞.
- `chat_users` ‚Äî —Å–≤—è–∑—å –º–µ–∂–¥—É —á–∞—Ç–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
- `messages` ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π.
- `summaries` ‚Äî –∫—Ä–∞—Ç–∫–∏–µ –ø–µ—Ä–µ—Å–∫–∞–∑—ã —á–∞—Ç–æ–≤.
- `chat_configs` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–æ–≤: `history_limit` –∏ `interest_interval`.

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ npm –∏ TypeScript.

## –ü—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è `RepositoryMessageService`, `PromptDirector` –∏ `MessageContextExtractor`,
  —á—Ç–æ –ø–æ–≤—ã—Å–∏–ª–æ –∏—Ö –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ –±–æ–ª–µ–µ —á–µ–º 90%.
